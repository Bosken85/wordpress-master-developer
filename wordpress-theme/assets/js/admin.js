/*! For license information please see admin.js.LICENSE.txt */
!function(e){"use strict";class t{constructor(){this.init()}init(){this.setupCustomizer(),this.setupMediaUploader(),this.setupColorPicker(),this.setupThemeInstaller(),this.setupFormValidation()}setupCustomizer(){"undefined"!=typeof wp&&wp.customize&&this.setupCustomizerPreviews(),this.setupCustomizerControls()}setupCustomizerPreviews(){const{customize:t}=wp;t("hero_title",t=>{t.bind(t=>{e(".hero-title").text(t)})}),t("hero_subtitle",t=>{t.bind(t=>{e(".hero-subtitle").text(t)})}),t("hero_description",t=>{t.bind(t=>{e(".hero-description").text(t)})}),t("hero_button_text",t=>{t.bind(t=>{e(".hero-cta").text(t)})}),t("primary_color",e=>{e.bind(e=>{this.updateCSSVariable("--color-primary",e)})}),t("secondary_color",e=>{e.bind(e=>{this.updateCSSVariable("--color-secondary",e)})}),t("hero_background_image",t=>{t.bind(t=>{t&&e(".hero-section").css("background-image",`url(${t})`)})})}updateCSSVariable(e,t){document.documentElement.style.setProperty(e,t)}setupCustomizerControls(){e('.customize-control-range input[type="range"]').on("input",function(){const t=e(this);t.siblings(".range-value").text(t.val())}),e('.customize-control-toggle input[type="checkbox"]').on("change",function(){const t=e(this),i=e(`[data-depends="${t.attr("id")}"]`);t.is(":checked")?i.slideDown():i.slideUp()})}setupMediaUploader(){e(".upload-button").on("click",function(t){t.preventDefault();const i=e(this),s=i.siblings('input[type="hidden"]'),o=i.siblings(".image-preview"),r=wp.media({title:"Select Image",button:{text:"Use This Image"},multiple:!1});r.on("select",function(){const e=r.state().get("selection").first().toJSON();s.val(e.url),o.html(`<img src="${e.url}" alt="" style="max-width: 200px; height: auto;">`),i.text("Change Image")}),r.open()}),e(".remove-image").on("click",function(t){t.preventDefault();const i=e(this),s=i.siblings('input[type="hidden"]'),o=i.siblings(".image-preview"),r=i.siblings(".upload-button");s.val(""),o.empty(),r.text("Select Image")})}setupColorPicker(){e.fn.wpColorPicker&&e(".color-picker").wpColorPicker({change:function(t,i){const s=i.color.toString();e(this).val(s).trigger("change")}})}setupThemeInstaller(){e(".demo-import-button").on("click",function(t){t.preventDefault();const i=e(this),s=i.text();i.text("Importing...").prop("disabled",!0),e.ajax({url:ajaxurl,type:"POST",data:{action:"wp_master_dev_import_demo",nonce:wpMasterDevAdmin.nonce},success:function(t){t.success?(i.text("Import Complete!").removeClass("button-primary").addClass("button-secondary"),e(".demo-import-status").html('<div class="notice notice-success"><p>Demo content imported successfully!</p></div>')):(i.text(s).prop("disabled",!1),e(".demo-import-status").html('<div class="notice notice-error"><p>Import failed. Please try again.</p></div>'))},error:function(){i.text(s).prop("disabled",!1),e(".demo-import-status").html('<div class="notice notice-error"><p>Import failed. Please try again.</p></div>')}})}),e(".setup-wizard .next-step").on("click",function(t){t.preventDefault();const i=e(".wizard-step.active"),s=i.next(".wizard-step");s.length&&(i.removeClass("active"),s.addClass("active"))}),e(".setup-wizard .prev-step").on("click",function(t){t.preventDefault();const i=e(".wizard-step.active"),s=i.prev(".wizard-step");s.length&&(i.removeClass("active"),s.addClass("active"))})}setupFormValidation(){e("#theme-options-form").on("submit",function(t){let i=!0;e(this).find("[required]").each(function(){const t=e(this);t.val().trim()?t.removeClass("error"):(t.addClass("error"),i=!1)}),e(this).find('input[type="email"]').each(function(){const t=e(this),s=t.val().trim();s&&!function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(s)?(t.addClass("error"),i=!1):t.removeClass("error")}),i||(t.preventDefault(),e(".form-errors").html('<div class="notice notice-error"><p>Please correct the highlighted fields.</p></div>'))}),e("input, textarea, select").on("blur",function(){const t=e(this);t.attr("required")&&!t.val().trim()?t.addClass("error"):t.removeClass("error")})}showNotice(t,i="success"){const s=e(`<div class="notice notice-${i} is-dismissible"><p>${t}</p></div>`);e(".wrap h1").after(s),setTimeout(()=>{s.fadeOut()},5e3)}ajaxRequest(t,i={}){return e.ajax({url:ajaxurl,type:"POST",data:{action:t,nonce:wpMasterDevAdmin.nonce,...i}})}}e(document).ready(function(){new t})}(jQuery);